@model IEnumerable<WebASP_App.Models.CoinInfo>

@{
    ViewBag.Title = "Все пользователи";
}

<head>
   
</head>
<body>


    <table class="table table_sort">
        <thead>
            <tr>
                <th>Название</th>
                <th>Символ</th>
                <th>Логотип</th>
                <th>Цена USD</th>
                <th>Изменение цены за последний час</th>
                <th>Изменение цены за последние 24 часа</th>
                <th>Капитализация USD</th>
                <th>Обновление данных</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.name</td>
                    <td>@item.symbol</td>
                    <td><img width="80" height="80" src=@item.logo alt=@item.logo></td>
                    <td>@item.quote.USD.price</td>
                    <td>@item.quote.USD.percent_change_1h%</td>
                    <td>@item.quote.USD.percent_change_24h%</td>
                    <td>@item.quote.USD.market_cap</td>
                    <td>@item.last_updated</td>
                </tr>
            }
        </tbody>
    </table>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const getSort = ({ target }) => {
                const order = (target.dataset.order = -(target.dataset.order || -1));
                const index = [...target.parentNode.cells].indexOf(target);
                const collator = new Intl.Collator(['en', 'ru'], { numeric: true });
                const comparator = (index, order) => (a, b) => order * collator.compare(
                    a.children[index].innerHTML,
                    b.children[index].innerHTML
                );

                for (const tBody of target.closest('table').tBodies)
                    tBody.append(...[...tBody.rows].sort(comparator(index, order)));

                for (const cell of target.parentNode.cells)
                    cell.classList.toggle('sorted', cell === target);
            };

            document.querySelectorAll('.table_sort thead').forEach(tableTH => tableTH.addEventListener('click', () => getSort(event)));

        });
    </script>
</body>
